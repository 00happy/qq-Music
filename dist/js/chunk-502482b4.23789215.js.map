{"version":3,"sources":["webpack:///./src/views/Video.vue","webpack:///./src/views/Video.vue?c1c3","webpack:///./src/views/Video.vue?8416","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["class","_createElementVNode","_ctx","length","_createElementBlock","_createVNode","_component_van_popover","show","$event","actions","$setup","onSelect","reference","_component_van_button","round","_component_van_icon","name","_hoisted_5","_component_van_divider","_Fragment","_renderList","item","key","id","list","onClick","_hoisted_8","urlInfo","src","coverUrl","alt","_hoisted_15","playTime","_hoisted_16","_toDisplayString","toFixed","_hoisted_17","String","Date","durationms","getMinutes","padStart","getSeconds","title","creator","_hoisted_21","nickname","_createBlock","_component_van_empty","description","type","setup","state","reactive","categories","iconList","selectedType","showPopover","songList","typeList","videoList","text","store","useStore","router","useRouter","toPlayList","push","query","chooseType","requestApi","action","console","log","axios","url","then","res","data","datas","map","el","onMounted","profile","userId","response","toRefs","__exports__","render","$","$map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","callbackfn","this","arguments","undefined"],"mappings":"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","file":"js/chunk-502482b4.23789215.js","sourcesContent":["<template>\r\n  <div class=\"video\" v-if=\"videoList.length\">\r\n    <div class=\"typeBar\">\r\n      <div class=\"typeBut\">\r\n        <van-popover\r\n          v-model:show=\"showPopover\"\r\n          :actions=\"actions\"\r\n          @select=\"onSelect\"\r\n          class=\"popover\"\r\n        >\r\n          <template #reference>\r\n            <van-button class=\"typeButton\" round\r\n              >{{ selectedType }}<van-icon name=\"arrow\"\r\n            /></van-button>\r\n          </template>\r\n          <div class=\"popWrapper\">\r\n            <div class=\"head\">全部分类</div>\r\n            <van-divider />\r\n            <div class=\"sort-wrap\">\r\n              <div\r\n                class=\"sort-item\"\r\n                v-for=\"(item) in typeList\"\r\n                :key=\"item.id\"\r\n              >\r\n                <!-- <div class=\"left\">\r\n                  <van-icon :name=\"iconList[index%6]\" class=\"icon\" />\r\n                  {{ item.name }}\r\n                </div> -->\r\n                <div class=\"right\">\r\n                  <ul>\r\n                    <li\r\n                      v-for=\"list in typeList\"\r\n                      :key=\"list.id\"\r\n                      @click=\"chooseType(list)\"\r\n                    >\r\n                      {{ list.name }}\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </van-popover>\r\n      </div>\r\n    </div>\r\n    <div class=\"songList-wrapper\">\r\n      <div class=\"song-list\">\r\n        <div\r\n          class=\"song-item\"\r\n          v-for=\"item in videoList\"\r\n          :key=\"item\"\r\n          @click=\"toPlayList(item.urlInfo.id)\"\r\n        >\r\n          <div class=\"top\">\r\n            <img :src=\"item.coverUrl\" alt=\"\" />\r\n            <div class=\"listenCount\" v-if=\"item.coverUrl\">\r\n              <i class=\"bi bi-play\"></i>\r\n              <span v-if=\"item.playTime / 10000 > 10000\"\r\n                >{{ (item.playTime / 100000000).toFixed(1) }}亿</span\r\n              >\r\n              <span v-else>{{ (item.playTime / 10000).toFixed(1) }}万</span>\r\n            </div>\r\n            <div class=\"playTime\">{{String(new Date(item.durationms).getMinutes()).padStart(2,'0')+':'+String(new Date(item.durationms).getSeconds()).padStart(2,'0')}}</div>\r\n            <van-icon name=\"play-circle\" class=\"bofang\" />\r\n          </div>\r\n          <div class=\"bottom\">\r\n            <div class=\"title\">{{ item.title }}</div>\r\n            <span v-if=\"item.creator\">by {{ item.creator.nickname }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <van-empty description=\"请先登录\" class=\"empty\" v-else>\r\n    <van-button round type=\"default\" class=\"bottom-button\" @click=\"goto\"\r\n      >去音乐馆逛逛</van-button\r\n    >\r\n  </van-empty>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, reactive, toRefs } from \"vue\";\r\nimport { Toast } from \"vant\";\r\nimport axios from \"axios\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useStore } from 'vuex';\r\n\r\nexport default {\r\n  setup() {\r\n    const state = reactive({\r\n      categories: [],\r\n      iconList: [\r\n        \"fire-o\",\r\n        \"smile-comment-o\",\r\n        \"cluster-o\",\r\n        \"apps-o\",\r\n        \"smile-o\",\r\n        \"notes-o\",\r\n      ],\r\n      selectedType: \"推荐\",\r\n      showPopover: false,\r\n      songList: [],\r\n      typeList: [],\r\n      videoList: [],\r\n    });\r\n    // 通过 actions 属性来定义菜单选项\r\n    const actions = [\r\n      { text: \"选项一\" },\r\n      { text: \"选项二\" },\r\n      { text: \"选项三\" },\r\n    ];\r\n    \r\n    const store = useStore()\r\n    const router = useRouter();\r\n    const toPlayList = (id) => {\r\n      router.push({ name: \"videoPage\", query: { id: id } });\r\n    };\r\n    const chooseType = (list) => {\r\n      state.showPopover = !state.showPopover;\r\n      state.selectedType = list.name\r\n      requestApi(list.id);\r\n    };\r\n    const onSelect = (action) => Toast(action.text);\r\n    const requestApi = (id) => {\r\n      console.log(id);\r\n      axios({\r\n        url:`/mini/video/group?id=${id}`\r\n      }).then(res=>{\r\n        console.log(res);\r\n        state.videoList = res.data.datas.map((el) => el.data);\r\n      })\r\n    };\r\n    onMounted(() => {\r\n      const id = store.state.profile?store.state.profile.userId:-1\r\n      if(!id){\r\n        Toast('还未登录')\r\n        return\r\n      }\r\n      axios({\r\n        url: \"/mini/video/group/list\",\r\n      }).then((res) => {\r\n        state.typeList = res.data.data;\r\n      });\r\n       axios({\r\n        url: \"/api/getSongListCategories\",\r\n      }).then((res) => {\r\n        state.categories = res.data.response.data.categories;\r\n      });\r\n      axios({\r\n        url: \"/mini/video/timeline/recommend\",\r\n      }).then((res) => {\r\n        state.videoList = res.data.datas.map((el) => el.data);\r\n        console.log(state.videoList);\r\n      });\r\n      \r\n \r\n    });\r\n    return {\r\n      actions,\r\n      onSelect,\r\n      requestApi,\r\n      chooseType,\r\n      toPlayList,\r\n      ...toRefs(state),\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.video {\r\n  margin: 0 60px;\r\n  padding: 20px;\r\n  position: relative;\r\n  .head {\r\n    width: 889px;\r\n    height: 147px;\r\n    overflow: hidden;\r\n    background: url(\"http://p3.music.126.net/lOdqEbPagBUGf547BjmCMQ==/109951164840594920.jpg?param=200y200\")\r\n      no-repeat;\r\n    background-size: 1000px 1000px;\r\n    filter: blur(50px);\r\n  }\r\n  .left {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n  }\r\n  .right {\r\n    position: absolute;\r\n    left: 234px;\r\n    top: 9px;\r\n    .headTag {\r\n      color: #e7aa5a;\r\n      border: #e7aa5a;\r\n      background: transparent;\r\n      margin-top: 15px;\r\n    }\r\n    .title {\r\n      color: #fff;\r\n      font-size: 18px;\r\n      margin-top: 15px;\r\n    }\r\n    .desc {\r\n      color: #d5d5d5;\r\n      font-size: 14px;\r\n      margin-top: 15px;\r\n    }\r\n  }\r\n  .typeBar {\r\n    margin-left: -20px;\r\n    .typeBut {\r\n      display: flex;\r\n      .typeButton {\r\n        padding-left: 18px;\r\n        height: 37px;\r\n        color: #111;\r\n        background-color: #fff;\r\n      }\r\n      .typeList {\r\n        margin-left: 250px;\r\n        list-style: none;\r\n        display: flex;\r\n        align-items: center;\r\n        li {\r\n          margin-left: 20px;\r\n          cursor: pointer;\r\n        }\r\n        li:hover {\r\n          color: #1ed2a8;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .songList-wrapper {\r\n    width: 1040px;\r\n    margin-top: 20px;\r\n    margin-left: -30px;\r\n    .song-list {\r\n      display: flex;\r\n      width: 100%;\r\n      flex-wrap: wrap;\r\n      .song-item {\r\n        cursor: pointer;\r\n        margin: 10px;\r\n        width: 27%;\r\n        border-radius: 10px;\r\n        .top {\r\n          position: relative;\r\n          img {\r\n            width: 279px;\r\n            border-radius: 10px;\r\n          }\r\n          .listenCount {\r\n            position: absolute;\r\n            left: 204px;\r\n            top: 1px;\r\n            color: #fff;\r\n            width: 81px;\r\n            height: 26px;\r\n            line-height: 26px;\r\n            text-align: center;\r\n            font-size: 14px;\r\n            border-radius: 10px;\r\n          }\r\n          .bofang {\r\n            position: absolute;\r\n            font-size: 90px;\r\n            position: absolute;\r\n            left: 101px;\r\n            top: 33px;\r\n            display: none;\r\n            color: #ffffff;\r\n          }\r\n          .playTime{\r\n            position: absolute;\r\n            left: 214px;\r\n            bottom:1px;\r\n            color: #fff;\r\n            width: 81px;\r\n            height: 26px;\r\n            line-height: 26px;\r\n            text-align: center;\r\n            font-size: 14px;\r\n            border-radius: 10px;\r\n\r\n          }\r\n          .bofang:hover {\r\n            color: #1ecfa3;\r\n          }\r\n        }\r\n        .bottom {\r\n          .title {\r\n            font-size: 17px;\r\n            font-weight: bold;\r\n          }\r\n          span {\r\n            color: grey;\r\n          }\r\n        }\r\n      }\r\n      .song-item:hover {\r\n        transform: translateY(-12px);\r\n        transition: 0.4s;\r\n        .bofang {\r\n          display: block;\r\n        }\r\n        .listenCount {\r\n          display: none;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n.empty{\r\n  margin: 50px 347px\r\n}\r\n.van-popup {\r\n  background-color: red;\r\n  z-index: 2005;\r\n  position: absolute;\r\n  left: 297px !important;\r\n  width: 950px;\r\n  top: 565px;\r\n  margin: 0px;\r\n  .popWrapper {\r\n    position: absolute;\r\n    width: 882px;\r\n    left: -39px;\r\n    background-color: #fff;\r\n    border: 1px solid #d5d5d5;\r\n    border-radius: 34px;\r\n    z-index: 10;\r\n    box-shadow: 0px 8px 18px #c8c9cc;\r\n    .head {\r\n      height: 5px;\r\n      padding: 20px 35px;\r\n    }\r\n    .sort-wrap {\r\n      padding: 20px 40px;\r\n      .sort-item {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        align-items: flex-start;\r\n        .left {\r\n          width: 15%;\r\n          padding-top: 10px;\r\n          color: #969799;\r\n          .type {\r\n            display: flex;\r\n          }\r\n          .icon {\r\n            font-size: 30px;\r\n            color: #111;\r\n            vertical-align: middle;\r\n          }\r\n        }\r\n        .right {\r\n          ul {\r\n            display: flex;\r\n            flex-wrap: wrap;\r\n            li {\r\n              width: 20%;\r\n              height: 45px;\r\n              line-height: 45px;\r\n              cursor: pointer;\r\n            }\r\n            li:hover {\r\n              color: #1ecd9b;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import { render } from \"./Video.vue?vue&type=template&id=4b543e72&scoped=true\"\nimport script from \"./Video.vue?vue&type=script&lang=js\"\nexport * from \"./Video.vue?vue&type=script&lang=js\"\n\nimport \"./Video.vue?vue&type=style&index=0&id=4b543e72&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\lesson-yy\\\\VUE3\\\\qq-Music\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4b543e72\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Video.vue?vue&type=style&index=0&id=4b543e72&lang=less&scoped=true\"","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}