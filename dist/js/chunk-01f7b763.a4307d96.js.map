{"version":3,"sources":["webpack:///./src/views/searchPage.vue","webpack:///./src/views/searchPage.vue?fb5f","webpack:///./src/views/searchPage.vue?1fa2"],"names":["class","_createElementVNode","style","_ctx","_createBlock","_component_van_empty","description","_createVNode","_component_van_button","round","type","onClick","$setup","_createElementBlock","_hoisted_3","_Fragment","_renderList","item","index","key","_toDisplayString","String","padStart","_component_van_icon","name","_hoisted_7","_hoisted_8","_hoisted_9","ar","al","setup","props","ctx","state","reactive","isEmpty","songList","songCount","store","useStore","router","useRouter","goto","push","path","playSong","e","i","playList","length","id","commit","obj","songName","author","interval","dt","albumName","coverPic","picUrl","axios","url","withCredentials","then","res","songUrl","data","setTimeout","emit","onMounted","keywords","currentRoute","value","query","console","log","status","result","songs","toRefs","__exports__","render"],"mappings":"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","file":"js/chunk-01f7b763.a4307d96.js","sourcesContent":["<template>\r\n  <van-empty description=\"暂时搜不到\" class=\"empty\" v-if=\"empty\">\r\n    <van-button round type=\"default\" class=\"bottom-button\" @click=\"goto\"\r\n      >去音乐馆逛逛</van-button\r\n    >\r\n  </van-empty>\r\n  <div class=\"list\" v-else>\r\n      <div class=\"list-top\">\r\n        <div class=\"top-item operator\">操作</div>\r\n        <div class=\"top-item title\">歌曲</div>\r\n        <div class=\"top-item singer\">歌手</div>\r\n        <div class=\"top-item cd\">专辑</div>\r\n      </div>\r\n      <div\r\n        class=\"list-top sing\"\r\n        v-for=\"(item, index) in songList\"\r\n        :key=\"index\"\r\n        :class=\"index == activeIndex ? 'active' : ''\"\r\n        @click=\"playSong(item)\"\r\n      >\r\n        <div class=\"top-item operator\">\r\n          <span>{{ String(index + 1).padStart(2, \"0\") }}</span>\r\n          <van-icon name=\"like-o\" />\r\n          <van-icon name=\"down\" />\r\n        </div>\r\n        <div class=\"top-item title\">\r\n          {{ item.name }}\r\n          <span class=\"addition\" style=\"color: #07c160\"> VIP</span>\r\n          <span class=\"addition\" style=\"color: #ff976a\"> SQ</span>\r\n          <span> <i class=\"iconfont icon-mv\"></i></span>\r\n        </div>\r\n        <div class=\"top-item singer\">\r\n          <span>{{ item.ar[0].name }}</span>\r\n        </div>\r\n        <div class=\"top-item cd\">{{ item.al.name }}</div>\r\n      </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, reactive, toRefs } from 'vue';\r\nimport { useRouter } from \"vue-router\";\r\nimport axios from 'axios';\r\nimport { useStore } from 'vuex';\r\nexport default {\r\n  setup(props,ctx) {\r\n    const state = reactive({\r\n      isEmpty:true,\r\n      songList:[],\r\n      songCount:0\r\n    })\r\n    const store = useStore()\r\n    const router = useRouter();\r\n    const goto = () => {\r\n      router.push({ path: \"/home\" });\r\n    };\r\n    const playSong = (e) => {\r\n      for (let i = 0; i < store.state.playList.length; i++) {\r\n        if (store.state.playList[i].id == e.id) {\r\n          store.commit(\"setPlayIndex\", i);\r\n          return;\r\n        }\r\n      }\r\n      let obj = {};\r\n      obj.id = e.id;\r\n      obj.songName = e.name;\r\n      obj.author = e.ar[0].name;\r\n      obj.interval = e.dt;\r\n      obj.albumName = e.al.name;\r\n      obj.coverPic = e.al.picUrl\r\n      axios({\r\n        url: `/mini/song/url?id=${e.id}`,\r\n        withCredentials: true, //关键\r\n      }).then(async(res) => {\r\n        obj.songUrl =res.data.data[0].url\r\n        await store.commit(\"setPlayList\", obj);\r\n        setTimeout(() => {\r\n          ctx.emit(\"playSong\", true);\r\n        }, 1000);\r\n      });\r\n    };\r\n    onMounted(()=>{\r\n      const keywords = router.currentRoute.value.query.keywords\r\n      axios({\r\n        url:`/mini/cloudsearch?keywords=${keywords}`\r\n      }).then(res=>{\r\n        console.log(res);\r\n        if(res.status==200){\r\n          console.log(res.data.result);\r\n          state.songList = res.data.result.songs\r\n          state.songCount = res.data.result.songCount\r\n          state.isEmpty = false\r\n        }\r\n      })\r\n    })\r\n    return {\r\n      goto,\r\n      playSong,\r\n      ...toRefs(state)\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.empty{\r\n  margin: 50px 347px\r\n}\r\n.list {\r\n    .list-top {\r\n      display: flex;\r\n      // justify-content: space-around;\r\n      color: #969799;\r\n      font-size: 14px;\r\n      margin: 0 16px;\r\n      .top-item {\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        height: 50px;\r\n        line-height: 50px;\r\n      }\r\n      .top-item:hover {\r\n        background-color: #dcdee0;\r\n      }\r\n      .operator {\r\n        text-align: end;\r\n        width: 130px;\r\n        margin-right: 14px;\r\n      }\r\n      .title {\r\n        width: 400px;\r\n        height: 50px;\r\n        line-height: 50px;\r\n        display: flex;\r\n        .addition {\r\n          display: block;\r\n          height: 15px;\r\n          font-size: 10px;\r\n          line-height: 15px;\r\n          margin-left: 8px;\r\n          margin-top: 17px;\r\n          border: 1px solid;\r\n          padding: 0 3px;\r\n          box-sizing: border-box;\r\n        }\r\n        .icon-mv {\r\n          display: block;\r\n          margin-left: 8px;\r\n        }\r\n      }\r\n      .singer {\r\n        width: 200px;\r\n      }\r\n      .cd {\r\n        width: 256px;\r\n      }\r\n      .time {\r\n        width: 160px;\r\n      }\r\n    }\r\n    .sing {\r\n      color: #111;\r\n      cursor: pointer;\r\n      .operator {\r\n        color: #afb0b0;\r\n        i {\r\n          font-size: 20px;\r\n          margin: 0 8px;\r\n        }\r\n      }\r\n    }\r\n    .active {\r\n      color: #1ed2a9;\r\n    }\r\n    .sing:nth-child(2n) {\r\n      background-color: #f0f1f2;\r\n    }\r\n    .sing:hover {\r\n      background-color: #dcdee0;\r\n    }\r\n  }\r\n</style>","import { render } from \"./searchPage.vue?vue&type=template&id=e0d1b622&scoped=true\"\nimport script from \"./searchPage.vue?vue&type=script&lang=js\"\nexport * from \"./searchPage.vue?vue&type=script&lang=js\"\n\nimport \"./searchPage.vue?vue&type=style&index=0&id=e0d1b622&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\lesson-yy\\\\VUE3\\\\qq-Music\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e0d1b622\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./searchPage.vue?vue&type=style&index=0&id=e0d1b622&lang=less&scoped=true\""],"sourceRoot":""}