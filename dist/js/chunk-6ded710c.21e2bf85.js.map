{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.concat.js","webpack:///./src/views/Login.vue","webpack:///./src/views/Login.vue?a459","webpack:///./src/assets/loginBg.png","webpack:///./src/views/Login.vue?5248","webpack:///./src/utils/utils.js"],"names":["$","global","fails","isArray","isObject","toObject","lengthOfArrayLike","createProperty","arraySpeciesCreate","arrayMethodHasSpeciesSupport","wellKnownSymbol","V8_VERSION","IS_CONCAT_SPREADABLE","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","TypeError","IS_CONCAT_SPREADABLE_SUPPORT","array","concat","SPECIES_SUPPORT","isConcatSpreadable","O","spreadable","undefined","FORCED","target","proto","forced","arg","i","k","length","len","E","this","A","n","arguments","class","_createElementVNode","src","_imports_0","alt","_createElementBlock","_hoisted_2","_createVNode","_component_van_notice_bar","scrollable","text","color","background","left-icon","_hoisted_5","type","placeholder","$setup","$event","_ctx","onClick","_component_van_count_down","ref","time","format","auto-start","onFinish","components","setup","state","reactive","msg","passwordType","msgVerify","countDown","router","useRouter","username","password","verify","store","useStore","onSwitch","onSubmit","axios","url","value","withCredentials","then","res","console","log","data","code","cookie","setLocal","commit","profile","setTimeout","push","path","fail","catch","err","func","sendMsg","start","throttle","reset","goto","toRefs","__exports__","render","module","exports","name","localStorage","setItem","wait","previous","now","Date","context","args","apply"],"mappings":"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","file":"js/chunk-6ded710c.21e2bf85.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\nvar TypeError = global.TypeError;\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.es/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  concat: function concat(arg) {\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = lengthOfArrayLike(E);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","<template>\r\n  <div class=\"Login\">\r\n    <div class=\"left\">\r\n      <img src=\"@/assets/loginBg.png\" alt=\"\" />\r\n    </div>\r\n    <div class=\"right\">\r\n      \r\n      <div class=\"input-wrapper\">\r\n        <van-notice-bar scrollable text=\"请登录网易云账号\" class=\"notice-bar\" color=\"#1989fa\" background=\"#ecf9ff\" left-icon=\"info-o\"/>\r\n        <p class=\"title\">账号登录</p>\r\n        <input type=\"text\" placeholder=\"手机号\" v-model=\"username\" />\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"密码\"\r\n          v-model=\"password\"\r\n          v-if=\"passwordType\"\r\n        />\r\n        <div class=\"verify\" v-else>\r\n          <input type=\"text\" placeholder=\"验证码\" v-model=\"verify\" />\r\n          <button @click=\"sendMsg\">\r\n            {{ msg }}\r\n            <van-count-down\r\n              ref=\"countDown\"\r\n              :time=\"time\"\r\n              format=\"ss 秒\"\r\n              :auto-start=\"false\"\r\n              @finish=\"onFinish\"\r\n              v-show=\"!msg\"\r\n            />\r\n          </button>\r\n        </div>\r\n        <p v-if=\"passwordType\" class=\"switch\" @click=\"onSwitch\">短信登录</p>\r\n        <p v-else class=\"switch\" @click=\"onSwitch\">密码登录</p>\r\n        <button class=\"active\" @click=\"onSubmit\">登录</button>\r\n        <button @click=\"goto\">注册</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, ref, toRefs } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport axios from \"axios\";\r\nimport { Toast } from \"vant\";\r\nimport { setLocal, throttle } from \"../utils/utils\";\r\nimport { useStore } from 'vuex';\r\nexport default {\r\n  components: {},\r\n  setup() {\r\n    const state = reactive({\r\n      msg: \"发送验证码\",\r\n      passwordType: true,\r\n      msgVerify: \"\",\r\n      time: 60 * 1000,\r\n    });\r\n    const countDown = ref(null);\r\n    const router = useRouter();\r\n    const username = ref(null);\r\n    const password = ref(null);\r\n    const verify = ref(null);\r\n    const store = useStore()\r\n    const onSwitch = () => {\r\n      state.passwordType = !state.passwordType;\r\n    };\r\n    const onSubmit = () => {\r\n      if (state.passwordType) {//密码登录\r\n        axios({\r\n          url: `/mini/login/cellphone?phone=${username.value}&password=${password.value}`,\r\n          withCredentials: true, //关键\r\n        })\r\n          .then((res) => {\r\n            console.log(res);\r\n            if (res.data.code == 200) {\r\n              if (res.data.cookie) {\r\n                setLocal(\"cookie\", res.data.cookie);\r\n                store.commit('setProfile',res.data.profile)\r\n                Toast(\"已成功登陆\");\r\n                setTimeout(() => {\r\n                  router.push({ path: \"/\" });\r\n                }, 1000);\r\n              }\r\n            } else {\r\n              Toast.fail(res.data.msg || \"请输入正确的手机号\");\r\n            }\r\n\r\n            // console.log(res);\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n      }else{//手机号登录\r\n         axios({\r\n          url: `/mini/captcha/verify?phone=${username.value}&captcha=${verify.value}`,\r\n          withCredentials: true, //关键\r\n        }).then(res=>{\r\n          if(res.data.code==200){\r\n            Toast(\"已成功登陆\");\r\n            setLocal(\"cookie\", res.data.cookie);\r\n            store.commit('setProfile',res.data.profile)\r\n            setTimeout(() => {\r\n              router.push({ path: \"/\" });\r\n            }, 1000);\r\n          }else if(res.data.code==503){\r\n            Toast(\"验证码错误\");\r\n            return \r\n          }else{\r\n            Toast(\"手机号不符合规范\");\r\n            return \r\n          }\r\n          console.log(res);\r\n        })\r\n      }\r\n    };\r\n    const func = () => {\r\n      axios({\r\n        url: `/mini/captcha/sent?phone=${username.value}`,\r\n        withCredentials: true, //关键\r\n      }).then((res) => {\r\n        console.log(res);\r\n      });\r\n    };\r\n    const sendMsg = () => {\r\n      if (!username.value) {\r\n        Toast.fail(\"请输入正确的手机号\");\r\n        return;\r\n      }\r\n      state.msg = \"\";\r\n      countDown.value.start();\r\n      throttle(func, 1000)();\r\n    };\r\n    const onFinish = () => {\r\n      state.msg = \"发送验证码\";\r\n      countDown.value.reset();\r\n    };\r\n    const goto = () => {\r\n      router.push({ path: \"/register\" });\r\n    };\r\n    return {\r\n      goto,\r\n      username,\r\n      password,\r\n      verify,\r\n      onSubmit,\r\n      onSwitch,\r\n      sendMsg,\r\n      ...toRefs(state),\r\n      onFinish,\r\n      func,\r\n      countDown,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.Login {\r\n  display: flex;\r\n  width: 100%;\r\n  height: 100%;\r\n  .left,\r\n  .right {\r\n    width: 50%;\r\n    background-color: #e7ecf0;\r\n    padding: 50px;\r\n  }\r\n  .left img {\r\n    width: 100%;\r\n    height: 350px;\r\n  }\r\n  .right {\r\n    .input-wrapper {\r\n      background-color: #fff;\r\n      height: 350px;\r\n      border-radius: 10px;\r\n      padding: 20px;\r\n      box-sizing: border-box;\r\n      position: relative;\r\n      .notice-bar{\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n      }\r\n      .title {\r\n        font-size: 20px;\r\n        font-weight: bold;\r\n        text-align: center;\r\n      }\r\n      input {\r\n        display: block;\r\n        width: 80%;\r\n        height: 50px;\r\n        margin: 10px auto;\r\n        border: 1px solid #e8e8e8;\r\n        border-radius: 10px;\r\n      }\r\n      button {\r\n        background-color: #fff;\r\n        display: inline-block;\r\n        width: 36%;\r\n        height: 50px;\r\n        margin: 10px auto;\r\n        margin-left: 45px;\r\n        border: 1px solid #e8e8e8;\r\n        text-align: center;\r\n        border-radius: 10px;\r\n        cursor: pointer;\r\n      }\r\n      .active {\r\n        background-color: #47a0fc;\r\n        color: #fff;\r\n      }\r\n      .verify {\r\n        display: flex;\r\n        width: 82%;\r\n        margin: -11px auto;\r\n        input {\r\n          width: 50%;\r\n        }\r\n      }\r\n      .switch {\r\n        margin-left: 48px;\r\n        font-size: 15px;\r\n        color: #576b95;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import { render } from \"./Login.vue?vue&type=template&id=9d1e2ad4&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=9d1e2ad4&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\lesson-yy\\\\VUE3\\\\qq-Music\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9d1e2ad4\"]])\n\nexport default __exports__","module.exports = __webpack_public_path__ + \"img/loginBg.c4e4e025.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Login.vue?vue&type=style&index=0&id=9d1e2ad4&lang=less&scoped=true\"","export const getLocal = (name) => {\r\n  return localStorage.getItem(name)\r\n}\r\n\r\nexport const setLocal = (name, value) => {\r\n  localStorage.setItem(name, value)\r\n}\r\n\r\nexport const throttle = (func, wait)=> {\r\n  var previous = 0;\r\n  console.log('节流开始');\r\n  return function () {\r\n      var now = Date.now();\r\n      var context = this;\r\n      var args = arguments;\r\n      if (now - previous > wait) {\r\n          func.apply(context, args);\r\n          previous = now;\r\n      }\r\n  }\r\n}\r\n\r\n"],"sourceRoot":""}